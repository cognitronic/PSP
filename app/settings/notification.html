<div class="container view-container" ng-cloak>
    <div class="row">
        <h3>{{ currentNotification.name.replace('_', ' ') }}</h3>
        <div data-access-level='{{ currentNotification.canrunmanually }}' ng-cloak>
            <div class="container-header">
                To send notification immediately to all recipients in the list below, select a date and click the Run Notification button.
            </div>
            <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-6">
                    <b>Report Run Date: </b>
                    <p class="input-group">
                        <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dt" is-open="opened"  max="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" />
                      <span class="input-group-btn">
                        <button class="btn " ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                      </span>
                    </p>
                </div>
            </div>
            <div class="row-fluid">
                <div class="form-group">
                    <b>Subject: <small>possible variables where applicable - !!date!! or !!site!!</small> </b>
                    <input class="form-control" type="text" ng-model="currentNotification.subject" value="{{ currentNotification.subject }}"/>
                </div>
                <div class="form-group">
                    <b>From Email Address: </b>
                    <input class="form-control" type="text" ng-model="currentNotification.fromemail" value="{{ currentNotification.fromemail}}"/>
                </div>
                <div class="form-group">
                    <b>&nbsp;</b>
                    <button class="btn " id="run" ng-click="runNotification()">
                        <i class="glyphicon glyphicon-play"></i> Run Notification
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container view-container-last" ng-cloak>

    <br />
    <div class="row">
        <h3>Manage Notification Recipients</h3>
        <hr/>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <table class="table table-striped table-hover">
                <thead>
                <tr class="bg-primary">
                    <th>
                        Recipients
                    </th>
                    <th>

                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="recipient in recipients track by $index">
                    <td>
                        {{ recipient }}
                    </td>
                    <td style="text-align: right;">
                        <button type="button" class="btn btn-sm" ng-click="removeRecipient($index)">
                            <i class="glyphicon glyphicon-remove"></i> Remove
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="col-lg-6 col-md-6 col-sm-6">
                <p >
                    <input type="email" class="form-control" name="addRecipient" ng-model="newRecipient" value="{{ newRecipient }}" id="addRecipient" required autofocus/>
                </p>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
                <button type="button" class="btn " ng-click="addRecipient()">
                    <i class="glyphicon glyphicon-plus"></i> Add Recipient
                </button>
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <table class="table table-striped table-hover">
                <thead>
                <tr class="bg-primary">
                    <th>
                        Bcc Recipients
                    </th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="bcc in bccemails track by $index - ">
                    <td>
                        {{ bcc }}
                    </td>
                    <td style="text-align: right;">
                        <button type="button" class="btn btn-sm" ng-click="removeBccRecipient($index)">
                            <i class="glyphicon glyphicon-remove"></i> Remove
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="col-lg-6 col-md-6 col-sm-6">
                <p >
                    <input type="email" class="form-control" name="addRecipient" ng-model="newBccRecipient" value="{{ newBccRecipient }}" id="addBccRecipient" required autofocus/>
                </p>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
                <button type="button" class="btn " ng-click="addBccRecipient()">
                    <i class="glyphicon glyphicon-plus"></i> Add Recipient
                </button>
            </div>
        </div>
    </div>
    <br />
    <hr/>

</div>
